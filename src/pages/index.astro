---
import Field from '@/components/Field.astro';
import Base from '@/templates/Base.astro';
import { AppConfig } from '@/utils/AppConfig';

const { title } = AppConfig;
const { description } = AppConfig;
---

<Base head={{ title, description }}>
  <main class="m-auto h-3/4 w-3/4 rounded-xl bg-slate-800 p-3">
    <h3 class="font-sans text-3xl">yoqacademico</h3>
    <form id="form" method="POST">
      <Field type="text" name="username" />
      <Field type="text" type="password" name="password" />
      <button type="button" id="submit">Submit</button>
      <button type="button" id="submit">Submit</button>
    </form>
  </main>

  <script is:inline>
    function submit() {
      const username = document?.getElementById('username');
      const password = document?.getElementById('password');

      fetch('http://localhost:3333', {
        method: 'POST',
        body: JSON.stringify({
          username: username?.value,
          password: password?.value,
        }),
        headers: {
          'Content-Type': 'application/json',
        },
      });
    }
    document?.getElementById('submit')?.addEventListener('click', submit);
  </script>
</Base>
